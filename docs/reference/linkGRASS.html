<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Locate and set up 'GRASS' API bindings — linkGRASS • link2GI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Locate and set up 'GRASS' API bindings — linkGRASS"><meta name="description" content="Initializes the session environment and the system paths for an easy access to
'GRASS GIS 7.x/8.x'.  The correct setup of the spatial and
 projection parameters is automatically performed by using either an existing and valid
 raster, terra, sp or sf object,
 or manually by providing a list containing the minimum parameters needed."><meta property="og:description" content="Initializes the session environment and the system paths for an easy access to
'GRASS GIS 7.x/8.x'.  The correct setup of the spatial and
 projection parameters is automatically performed by using either an existing and valid
 raster, terra, sp or sf object,
 or manually by providing a list containing the minimum parameters needed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">link2GI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/link2GI1.html">Link GI to R</a></li>
    <li><a class="dropdown-item" href="../articles/link2GI2.html">Basic usage of link2GI</a></li>
    <li><a class="dropdown-item" href="../articles/link2GI3.html">GRASS application for real world big data</a></li>
    <li><a class="dropdown-item" href="../articles/link2GI4.html">OTB Wrapper in link2GI</a></li>
    <li><a class="dropdown-item" href="../articles/link2GI5.html">Create reproducible project structures in link2GI</a></li>
    <li><a class="dropdown-item" href="../articles/link2GI6.html">Installation guide for link2GI related Software</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-spatial/link2GI/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Locate and set up 'GRASS' API bindings</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/link2GI/blob/HEAD/R/linkGRASS.R" class="external-link"><code>R/linkGRASS.R</code></a></small>
      <div class="d-none name"><code>linkGRASS.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Initializes the session environment and the system paths for an easy access to
<a href="https://grass.osgeo.org/" class="external-link">'GRASS GIS 7.x/8.x'</a>.  The correct setup of the spatial and
 projection parameters is automatically performed by using either an existing and valid
 <code>raster</code>, <code>terra</code>, <code>sp</code> or <code>sf</code> object,
 or manually by providing a list containing the minimum parameters needed.<br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">linkGRASS</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  epsg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  default_GRASS <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  search_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ver_select <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  gisdbase_exist <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  gisdbase <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_home <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spatial_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resolution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  returnPaths <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>raster/terra or sf/sp object</p></dd>


<dt id="arg-epsg">epsg<a class="anchor" aria-label="anchor" href="#arg-epsg"></a></dt>
<dd><p>manual epsg override</p></dd>


<dt id="arg-default-grass">default_GRASS<a class="anchor" aria-label="anchor" href="#arg-default-grass"></a></dt>
<dd><p>default is <code>NULL</code> If is <code>NULL</code> an automatic search for all installed versions is performed.
If you provide a valid list the corresponding version is initialized. An example for OSGeo4W64 is:
<code>c('C:/OSGeo4W64','grass-7.0.5','osgeo4w')</code></p></dd>


<dt id="arg-search-path">search_path<a class="anchor" aria-label="anchor" href="#arg-search-path"></a></dt>
<dd><p>Path or mount point to search for.</p></dd>


<dt id="arg-ver-select">ver_select<a class="anchor" aria-label="anchor" href="#arg-ver-select"></a></dt>
<dd><p>Boolean if TRUE you may choose interactively the binary version (if found  more than one),  by default FALSE</p></dd>


<dt id="arg-gisdbase-exist">gisdbase_exist<a class="anchor" aria-label="anchor" href="#arg-gisdbase-exist"></a></dt>
<dd><p>default is FALSE if set to TRUE the arguments gisdbase and location are expected to be an existing GRASS gisdbase</p></dd>


<dt id="arg-gisdbase">gisdbase<a class="anchor" aria-label="anchor" href="#arg-gisdbase"></a></dt>
<dd><p>default is <code>NULL</code>, invoke <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> to the 'GRASS' database. Alternatively you can provide a individual path.</p></dd>


<dt id="arg-use-home">use_home<a class="anchor" aria-label="anchor" href="#arg-use-home"></a></dt>
<dd><p>default is <code>FALSE</code>, set the GISRC path to tempdir(), if TRUE the HOME or USERPROFILE setting is used for writing the GISRC file</p></dd>


<dt id="arg-location">location<a class="anchor" aria-label="anchor" href="#arg-location"></a></dt>
<dd><p>default is <code>NULL</code>, invoke <code>basename(tempfile())</code> for defining the 'GRASS' location. Alternatively you can provide a individual path.</p></dd>


<dt id="arg-spatial-params">spatial_params<a class="anchor" aria-label="anchor" href="#arg-spatial-params"></a></dt>
<dd><p>default is <code>NULL</code>. Instead of a spatial object you may provide the geometry as a list. E.g. c(xmin,ymin,xmax,ymax,proj4_string)</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p>resolution in map units for the GRASS raster cells</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Boolean  switch for suppressing console messages default is TRUE</p></dd>


<dt id="arg-returnpaths">returnPaths<a class="anchor" aria-label="anchor" href="#arg-returnpaths"></a></dt>
<dd><p>Boolean if set to FALSE the paths of the selected version are written
to the PATH variable only, otherwise all paths and versions of the installed GRASS versions ae returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>GRASS GIS is excellently supported by the <code>rgrass</code> wrapper package. Nevertheless, 'GRASS GIS' is known for its
its high demands on the correct spatial and reference setup  and environment requirements. This becomes even worse on 'Windows
platforms or when there are several alternative 'GRASS GIS' installations available.
If you know how to use the <code>rgrass</code> package setup function <code><a href="https://osgeo.github.io/rgrass/reference/initGRASS.html" class="external-link">rgrass::initGRASS</a></code> works fine on Linux.
This is also true for known configurations under the 'Windows' operating system.
However, on university labs or corporate machines with limited privileges and/or different releases
such as the <a href="https://trac.osgeo.org/osgeo4w/" class="external-link">'OSGeo4W'</a> distribution and the  <a href="https://grass.osgeo.org/download/windows/" class="external-link">'GRASS' stand-alone</a> installation,
or different software releases (e.g. 'GRASS 7.0.5 and GRASS 8.1.0), it often becomes inconvenient or even
to get the correct links. <br> The function <code>linkGRASS</code> tries to find all valid 'GRASS GIS' binaries by #' analyzing the startup script files.
GRASS GIS' startup script files. After identifying the 'GRASS GIS' binaries, all #' necessary system variables and settings are
system variables and settings are generated and passed to a temporary R environment.
The concept is simple, but helpful for everyday use. You need to either
provide a <code>raster</code> or <code>sp</code> <code>sf</code> spatial object
that has the correct spatial and projection properties, or you can link directly to an existing 'GRASS' gisdbase and mapset.
If you choose a spatial object to initialize a correct 'GRASS' mapset, it will be used to create either a temporary or permanent mapset.
<a href="https://CRAN.R-project.org/package=rgrass" class="external-link">rgrass</a> environment with the correct 'GRASS' structure.<br><br>
The most time consuming part on Windows systems is the search process. This can easily take 10 minutes or more.
To speed up this process, you can also provide a correct parameter set. The best way to do this is to manually call <code>searchGRASSW</code> or for 'Linux' <code>searchGRASSX</code>.
and call <code>linkGRASS</code> with the version arguments of your choice. linkGRASS will initialize the use of GRASS.
If you have more than one valid installation and call <code>linkGRASS()</code> without arguments, you will be asked to select one.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Chris Reudenbach</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">run</span> <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">run</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get  data                         </span></span></span>
<span class="r-in"><span><span class="va">nc</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'shape/nc.shp'</span>, package<span class="op">=</span><span class="st">'sf'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Automatic linking of GRASS binaries using the nc data object for spatial referencing</span></span></span>
<span class="r-in"><span><span class="co"># This is the best practice linking procedure for on-the-fly jobs.</span></span></span>
<span class="r-in"><span><span class="co"># NOTE: If more than one GRASS installation is found, you will have to select one. </span></span></span>
<span class="r-in"><span><span class="va">grass</span> <span class="op">=</span> <span class="fu">linkGRASS</span><span class="op">(</span><span class="va">nc</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select the GRASS installation (if more than one)</span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span><span class="va">nc</span>, ver_select <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select the GRASS installation and define the search location</span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span><span class="va">nc</span>, ver_select <span class="op">=</span> <span class="cn">TRUE</span>, search_path <span class="op">=</span> <span class="st">'~/'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set up GRASS manually with spatial parameters of the nc data</span></span></span>
<span class="r-in"><span><span class="va">epsg</span> <span class="op">=</span> <span class="fl">28992</span></span></span>
<span class="r-in"><span><span class="va">proj4_string</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://edzer.github.io/sp/reference/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'+init=epsg:'</span>,<span class="va">epsg</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span>spatial_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">178605</span>,<span class="fl">329714</span>,<span class="fl">181390</span>,<span class="fl">333611</span>,<span class="va">proj4_string</span><span class="op">@</span><span class="va">projargs</span><span class="op">)</span>,epsg<span class="op">=</span><span class="va">epsg</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create some temporary project folders for a permanent gisdbase</span></span></span>
<span class="r-in"><span><span class="va">root_folder</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">grass_path</span> <span class="op">=</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="createFolders.html">createFolder</a></span><span class="op">(</span>root_folder <span class="op">=</span> <span class="va">root_folder</span>,</span></span>
<span class="r-in"><span>                         folders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'project1/'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">grass</span><span class="op">$</span><span class="va">exist</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># CREATE and link to a permanent GRASS folder at 'root_folder', location named 'project1' </span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span><span class="va">nc</span>, gisdbase <span class="op">=</span> <span class="va">root_folder</span>, location <span class="op">=</span> <span class="st">'project1'</span><span class="op">)</span>   </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ONLY LINK to a permanent GRASS folder in 'root_folder', location named 'project1' </span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span>gisdbase <span class="op">=</span> <span class="va">root_folder</span>, location <span class="op">=</span> <span class="st">'project1'</span>, gisdbase_exist <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span>   </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Manual creation of a GRASS gisdbase with the spatial parameters of the NC data. </span></span></span>
<span class="r-in"><span><span class="co"># additional use of a permanent directory 'root_folder' and the location 'nc_spatial_params'.</span></span></span>
<span class="r-in"><span><span class="va">epsg</span> <span class="op">=</span> <span class="fl">4267</span></span></span>
<span class="r-in"><span><span class="va">proj4_string</span> <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://edzer.github.io/sp/reference/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'+init=epsg:'</span>,<span class="va">epsg</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">linkGRASS</span><span class="op">(</span>gisdbase <span class="op">=</span> <span class="va">root_folder</span>,</span></span>
<span class="r-in"><span>           location <span class="op">=</span> <span class="st">'nc_spatial_params'</span>,</span></span>
<span class="r-in"><span>           spatial_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">84.32385</span>, <span class="fl">33.88199</span>,<span class="op">-</span><span class="fl">75.45698</span>,<span class="fl">36.58965</span>,<span class="va">proj4_string</span><span class="op">)</span>,epsg <span class="op">=</span> <span class="va">epsg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Reudenbach.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

