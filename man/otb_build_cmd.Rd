% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/otbIntro.R
\name{otb_build_cmd}
\alias{otb_build_cmd}
\title{Build a runOTB-compatible command template from OTB application metadata}
\usage{
otb_build_cmd(
  algo,
  gili = NULL,
  include_optional = c("none", "defaults", "all_na"),
  require_output = TRUE
)
}
\arguments{
\item{algo}{Character scalar. Name of the OTB application.}

\item{gili}{Optional list returned by \code{\link{linkOTB}}. If \code{NULL},
\code{linkOTB()} is called internally.}

\item{include_optional}{Character. One of \code{"none"}, \code{"defaults"},
\code{"all_na"}:
\describe{
  \item{\code{"none"}}{Do not include optional parameters.}
  \item{\code{"defaults"}}{Include optional parameters and prefill parsed defaults where available.}
  \item{\code{"all_na"}}{Include optional parameters but set all to \code{NA_character_}.}
}}

\item{require_output}{Logical. If \code{TRUE} (default), enforce that at least one
file-based output parameter key is present in the returned command template
(e.g. \code{out}, \code{io.out}, \code{mode.vector.out}). This reflects the
\pkg{link2GI} workflow policy to always write outputs to disk, even if OTB
marks some output parameters as optional.}
}
\value{
A list suitable for \code{\link{runOTB}}.
}
\description{
Constructs a command list in the format expected by \code{\link{runOTB}}:
the first element is the application name, followed by named parameters
(without leading \code{-}).
}
\details{
Mandatory parameters reported by OTB are always included and initialized
as \code{NA_character_} to force explicit user input.

Optional parameters can be included either with parsed defaults (when available)
or as \code{NA_character_}.

By default, this function also enforces presence of at least one file-based
output parameter in the template (see \code{require_output}), reflecting the
package policy to always write outputs to disk.
}
\examples{
\dontrun{
otb <- link2GI::linkOTB()
cmd <- otb_build_cmd("BandMathX", otb, include_optional = "defaults")
cmd[["il"]]  <- c("a.tif", "b.tif")
cmd <- otb_set_out(cmd, otb, path = "out.tif")
cmd[["exp"]] <- "im1b1 + im2b1"
runOTB(cmd, otb, quiet = FALSE)
}
}
\seealso{
\code{\link{otb_capabilities}}, \code{\link{otb_args_spec}},
  \code{\link{otb_required}}, \code{\link{otb_optional}}, \code{\link{otb_set_out}}
}
